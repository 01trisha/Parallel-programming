# Параллельная реализация метода Якоби в трехмерной области

область моделирования: [-1; 1] x [-1; 1] x [-1, 1]
искомая функция phi(x,y,z) = x^2 + y^2 + z^2
правая часть уравнения rho(x, y, z) = 6 - a * phi(x,y,z)
параметр уравнения: a = 10^5
порог сходимости eps = 10^-8
начальное сближение 0


разбиваем заданную область(куб) на заданное кол-во точек
используем метод якоби чтобы найти значение ф по всех точка, итерационно приближая значения ф до заданной точности

на каждой итерации мы пересчитываем значение ф в каждом узле внутри куба основываясь на знечениях соседей узла с предыдущии итерации

так как мы используем всех 6 соседей: Phi (i+1, j, k) (i-1, j, k) (i, j+1, k) (i, j-1, k) (i, j, k+1) (i, j, k-1)
то размеры должны быть минимум 3x3x3 чтоб была хоть одна внутреняя точка

Время исполнения:
Nx = Ny = Nz = 400
1 thread: 31.11s
2 threads: 15.86s
4 threads: 8.47s
8 threads: 7.23s
16 threads: 8.42s

Делим нашу 3д обоасть по оси X на слои между потокам и каждому задаем отступ(оффсет) по индексу(со слоями так же)

обмен предыдущей и текущей функции:
читаем данные из предыдущей
вычисляем новую
чтоб использовать ее в след шаге текущая должна стать предыдущей, а предыдущую мы перезаписываем

proc2:
--- x = 9 --- <- 
--- x = 8 --- <- 
--- x = 7 --- <- 

proc1: <- текущий процесс (rankProc = 1)
--- x = 7 --- <- downLimitLayer (полученный от proc2)

--- x = 6 --- <- prevDownLimit (отправляется proc2)
--- x = 5 --- 
--- x = 4 --- <- precUpLimit (отправляется proc0)

--- x = 3 --- <- upLimitLayer (полученный от proc0)
proc0:
--- x = 3 --- 
--- x = 2 ---
--- x = 1 ---

prevFunc	Значения функции на предыдущей итерации
currFunc	Сюда пишем новые значения
upLimitLayer	Верхний слой, полученный от предыдущего процесса
downLimitLayer	Нижний слой, полученный от следующего процесса
layerHeight	Количество локальных X-слоёв в этом процессе
offset	Смещение глобального X, с которого начинается этот процесс
rankProc	Номер процесса
countProc	Общее число процессов

send в waint от UB так как я мрну перещаписаит буфер prevFunc

H_X_2 - h_x^2 для аппроксимации в текущей функции используется